document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelectorAll(".wp-playlist-script"),e=document.querySelectorAll("audio, video");t.forEach((function(t){var e=JSON.parse(t.innerHTML),a=e.type,l=e.tracks,s=l[0],i=s.title?s.title:"",r=s.meta.album?s.meta.album:"",p=s.meta.artist?s.meta.artist:"",c=document.createElement("img"),n=document.createElement("div"),y=document.createElement("ol"),o=t.closest(".wp-playlist"),m=document.createElement("source");c.src=s.image.src,c.alt="",n.className="wp-playlist-caption",n.innerHTML='<span class="wp-playlist-item-meta wp-playlist-item-title">'+i+'</span><span class="wp-playlist-item-meta wp-playlist-item-album">'+r+'</span><span class="wp-playlist-item-meta wp-playlist-item-artist">'+p+"</span>",y.className="wp-playlist-tracks","textwidget"===o.parentNode.className&&(y.style="margin-left:-1em"),l.forEach((function(t){var e=document.createElement("li"),a=t.title?t.title:"",l=t.meta.album?t.meta.album:"",s=t.meta.artist?t.meta.artist:"",i=t.meta.length_formatted?t.meta.length_formatted:"";e.className="wp-playlist-item",e.dataset.title=a,e.dataset.album=l,e.dataset.artist=s,e.dataset.img=t.image.src,e.dataset.src=t.src,e.dataset.type=t.type,e.dataset.caption=t.caption,e.dataset.description=t.description,e.innerHTML='<div class="wp-playlist-caption"><span class="wp-playlist-item-title">'+a+'</span> <span class="wp-playlist-item-artist">'+s+'</span></div><div class="wp-playlist-item-length">'+i+"</div>",y.append(e)})),"audio"===a?(o.querySelector(".wp-playlist-current-item").append(c),o.querySelector(".wp-playlist-current-item").append(n)):o.querySelector(a).preload="metadata",m.type=s.type,m.src=s.src,o.querySelector(a).append(m),o.querySelector(a).src=s.src,o.querySelector(".wp-playlist-prev").after(y),o.querySelector(a).addEventListener("ended",(function(){var t=o.querySelector(".wp-playlist-playing"),e=[...t.parentNode.children].indexOf(t);o.querySelector(".wp-playlist-playing").classList.remove("wp-playlist-playing"),++e===l.length&&(e=0),o.querySelectorAll(".wp-playlist-item")[e].classList.add("wp-playlist-playing"),t=o.querySelector(".wp-playlist-playing"),o.querySelector(a).src=t.dataset.src,o.querySelector("source").type=t.dataset.type,o.querySelector("source").src=t.dataset.src,"audio"===a&&(o.querySelector("img").src=t.dataset.img,o.querySelector(".wp-playlist-item-title").textContent=t.dataset.title,o.querySelector(".wp-playlist-item-album").textContent=t.dataset.album,o.querySelector(".wp-playlist-item-artist").textContent=t.dataset.artist),setTimeout((function(){o.querySelector(a).play()}),200)}))})),document.addEventListener("click",(function(t){var e,a,l;t.target.closest(".wp-playlist-caption")?((a=t.target.closest(".wp-playlist")).querySelector(".wp-playlist-playing")&&a.querySelector(".wp-playlist-playing").classList.remove("wp-playlist-playing"),(e=t.target.closest(".wp-playlist-item")).classList.add("wp-playlist-playing"),l=(l=a.className.split(" ")[1]).split("-")[1],a.querySelector(l).src=e.dataset.src,"audio"===l&&(a.querySelector("img").src=e.dataset.img,a.querySelector(".wp-playlist-item-title").textContent=e.dataset.title,a.querySelector(".wp-playlist-item-album").textContent=e.dataset.album,a.querySelector(".wp-playlist-item-artist").textContent=e.dataset.artist),a.querySelector("source").type=e.dataset.type,a.querySelector("source").src=e.dataset.src,setTimeout((function(){a.querySelector(l).play()}),200)):(t.target.closest(".mejs-play")||t.target.closest(".mejs-overlay-play"))&&((a=t.target.closest(".wp-playlist")).querySelector(".wp-playlist-playing")||t.target.closest(".wp-playlist").querySelector(".wp-playlist-item ").classList.add("wp-playlist-playing"))})),e.forEach((function(t){new MediaElementPlayer(t,{stretching:"responsive",classPrefix:"mejs-"})}))}));