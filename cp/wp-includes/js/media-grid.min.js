document.addEventListener("DOMContentLoaded",(function(){var e,t,a,{FilePond:i}=window,n=new URLSearchParams(window.location.search),d=document.querySelector(".page-title-action"),r=document.querySelector(".uploader-inline"),o=document.querySelector(".close"),l=document.getElementById("upload-category"),c=document.getElementById("filepond"),s=document.getElementById("ajax-url").value,u=document.getElementById("media-modal"),m=document.getElementById("left-dashicon"),p=document.getElementById("right-dashicon"),y=document.getElementById("dialog-close-button"),g=document.getElementById("left-dashicon-mobile"),h=document.getElementById("right-dashicon-mobile"),v=document.querySelector(".edit-media-header .media-navigation"),b=document.querySelector(".attachment-media-view .media-navigation"),f="1",S=document.getElementById("filter-by-date")?document.getElementById("filter-by-date"):"",q=document.getElementById("filter-by-type")?document.getElementById("filter-by-type"):"",A=document.getElementById("media-search-input"),E=document.getElementById("taxonomy=media_category&term")?document.getElementById("taxonomy=media_category&term"):"",w=document.querySelector("#media-grid ul"),_=0,x=0;function L(e){var t=document.getElementById("media-"+e);if(t){var i=new URLSearchParams({action:"delete-post",_ajax_nonce:t.dataset.deleteNonce,id:e});fetch(s,{method:"POST",body:i,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){1===e?(a=null!=t.previousElementSibling?t.previousElementSibling.id:null!=t.nextElementSibling?t.nextElementSibling.id:d.id,t.remove(),y.click(),k()):console.log(_wpMediaGridSettings.delete_failed)}))["catch"]((function(e){console.error(_wpMediaGridSettings.error,e)}))}}function k(){var e,t=document.querySelectorAll(".media-item"),a=document.querySelector(".displaying-num").textContent.split(" "),i=document.querySelector(".load-more-count").textContent.split(" ");t.forEach((function(e,t){e.setAttribute("data-order",parseInt(t+1))})),e=5 in i?" "+i[5]:"",document.querySelector(".load-more-count").textContent=i[0]+" "+t.length+" "+i[2]+" "+t.length+" "+i[4]+e,document.querySelector(".displaying-num").textContent=t.length+" "+a[1],u.querySelector("#total-media-items").textContent=t.length,u.querySelector("#total-media-items-mobile").textContent=t.length}function I(){window.innerWidth>480?(v.style.display="",b.style.display="none"):(v.style.display="none",b.style.display="")}function B(e){var t=e.dataset.id,a=e.getAttribute("aria-label"),i=e.dataset.date,d=e.dataset.filename,r=e.dataset.filetype,o=e.dataset.mime,l=e.dataset.size,c=e.dataset.width,y=e.dataset.height,v=e.dataset.caption,b=e.dataset.description,f=e.dataset.taxes,S=e.dataset.tags,q=e.dataset.url,A=e.querySelector("img").getAttribute("alt"),E=e.dataset.link,w=e.dataset.author,_=e.dataset.authorLink,x=e.dataset.orientation?" "+e.dataset.orientation:"",L=e.dataset.menuOrder,k=e.dataset.updateNonce,B=e.dataset.deleteNonce,M=e.previousElementSibling?e.previousElementSibling.id:"",T=e.nextElementSibling?e.nextElementSibling.id:"",N=e.dataset.order,C=parseInt(document.querySelector(".displaying-num").textContent);n.set("item",t),history.replaceState(null,null,"?"+n.toString()),function(e){var t=document.createElement("form");t.className="compat-item",t.innerHTML='<input type="hidden" id="menu-order" name="attachments['+e+'][menu_order]" value="0"><p class="media-types media-types-required-info"><span class="required-field-message">Required fields are marked <span class="required">*</span></span></p><span class="setting" data-setting="media_category"><label for="attachments-'+e+'-media_category"><span class="alignleft">Media Categories</span></label><input type="text" class="text" id="attachments-'+e+'-media_category" name="attachments['+e+'][media_category]" value=""></span><span class="setting" data-setting="media_post_tag"><label for="attachments-'+e+'-media_post_tag"><span class="alignleft">Media Tags</span></label><input type="text" class="text" id="attachments-'+e+'-media_post_tag" name="attachments['+e+'][media_post_tag]" value=""></span>',null!=document.querySelector(".compat-item")&&document.querySelector(".compat-item").remove(),document.querySelector(".attachment-compat").append(t)}(t),u.querySelector(".attachment-date").textContent=i,u.querySelector(".uploaded-by").children[1].textContent=w,u.querySelector(".uploaded-by").children[1].href=_,u.querySelector(".attachment-filename").textContent=d,u.querySelector(".attachment-filetype").textContent=o,u.querySelector(".attachment-filesize").textContent=l,u.querySelector(".attachment-dimensions").textContent=c+" "+_wpMediaGridSettings.by+" "+y+" "+_wpMediaGridSettings.pixels,u.querySelector(".attachment-media-view").className="attachment-media-view"+x,u.querySelector("#attachment-details-two-column-alt-text").value=A,u.querySelector("#attachment-details-two-column-title").value=a,u.querySelector("#attachment-details-two-column-caption").value=v,u.querySelector("#attachment-details-two-column-description").value=b,u.querySelector("#attachment-details-two-column-copy-link").value=q,u.querySelector("#menu-order").value=L,u.querySelector("#attachments-"+t+"-media_category").value=f,u.querySelector("#attachments-"+t+"-media_post_tag").value=S,"audio"===r?(u.querySelector("#media-image").setAttribute("hidden",!0),u.querySelector("#media-video").setAttribute("hidden",!0),u.querySelector("#media-audio").removeAttribute("hidden"),u.querySelector("audio.wp-audio-shortcode").src=q,u.querySelector("audio").setAttribute("type",o),u.querySelector(".alt-text").style.display="none",u.querySelector("#alt-text-description").style.display="none"):"video"===r?(u.querySelector(".wp-video").removeAttribute("style"),u.querySelector("#media-image").setAttribute("hidden",!0),u.querySelector("#media-audio").setAttribute("hidden",!0),u.querySelector("#media-video").removeAttribute("hidden"),u.querySelector("video.wp-video-shortcode").src=q,u.querySelector("video").setAttribute("type",o),u.querySelector(".alt-text").style.display="none",u.querySelector("#alt-text-description").style.display="none"):(u.querySelector("#media-audio").setAttribute("hidden",!0),u.querySelector("#media-video").setAttribute("hidden",!0),u.querySelector("#media-image").removeAttribute("hidden"),"image"===r?(u.querySelector(".thumbnail-image img").src=q,u.querySelector(".edit-attachment").style.display="",u.querySelector(".alt-text").style.display="",u.querySelector("#alt-text-description").style.display="",("image/webp"===o&&!_wpMediaGridSettings.webp_editable||"image/avif"===o&&!_wpMediaGridSettings.avif_editable||"image/heic"===o&&!_wpMediaGridSettings.heic_editable)&&(u.querySelector(".edit-attachment").style.display="none")):(u.querySelector(".thumbnail-image img").src=e.querySelector("img").src,u.querySelector(".edit-attachment").style.display="none")),u.querySelector(".thumbnail-image img").setAttribute("alt",A),u.querySelector("#view-attachment").href=E,u.querySelector("#edit-more").href=s.replace("admin-ajax.php","post.php?post="+t+"&action=edit"),u.querySelector("#download-file").href=q,k?(u.querySelector("#attachment-details-two-column-alt-text").removeAttribute("readonly"),u.querySelector("#attachment-details-two-column-title").removeAttribute("readonly"),u.querySelector("#attachment-details-two-column-caption").removeAttribute("readonly"),u.querySelector("#attachment-details-two-column-description").removeAttribute("readonly"),u.querySelector("#attachments-"+t+"-media_category").removeAttribute("readonly"),u.querySelector("#attachments-"+t+"-media_post_tag").removeAttribute("readonly"),u.querySelector(".edit-attachment").style.display=""):(u.querySelector("#attachment-details-two-column-alt-text").setAttribute("readonly",!0),u.querySelector("#attachment-details-two-column-title").setAttribute("readonly",!0),u.querySelector("#attachment-details-two-column-caption").setAttribute("readonly",!0),u.querySelector("#attachment-details-two-column-description").setAttribute("readonly",!0),u.querySelector("#attachments-"+t+"-media_category").setAttribute("readonly",!0),u.querySelector("#attachments-"+t+"-media_post_tag").setAttribute("readonly",!0),u.querySelector(".edit-attachment").style.display="none"),B?(u.querySelector(".delete-attachment").style.display="",u.querySelectorAll(".links-separator")[2].style.display=""):(u.querySelector(".delete-attachment").style.display="none",u.querySelectorAll(".links-separator")[2].style.display="none"),m.setAttribute("data-prev",M),p.setAttribute("data-next",T),""===M?(m.setAttribute("aria-disabled",!0),g.setAttribute("aria-disabled",!0)):(m.setAttribute("aria-disabled",!1),g.setAttribute("aria-disabled",!1)),""===T?(p.setAttribute("aria-disabled",!0),h.setAttribute("aria-disabled",!0)):(p.setAttribute("aria-disabled",!1),h.setAttribute("aria-disabled",!1)),u.querySelector("#current-media-item").textContent=N,u.querySelector("#total-media-items").textContent=C,u.querySelector("#current-media-item-mobile").textContent=N,u.querySelector("#total-media-items-mobile").textContent=C,I(),u.classList.add("modal-loading"),document.body.style.overflow="hidden",setTimeout((function(){u.showModal()}),1),u.querySelectorAll(".compat-item input").forEach((function(e){e.addEventListener("blur",(function(){k&&function(e,t){var a=document.getElementById("media-"+t);if(a){var i,n,d=new FormData,r=e.getAttribute("name").replace("attachments["+t+"][","").replace("]","");d.append("action","save-attachment-compat"),d.append("nonce",a.dataset.updateNonce),d.append("id",t),d.append("taxonomy",r),d.append("attachments["+t+"]["+r+"]",e.value),fetch(s,{method:"POST",body:d,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(t){t.success?("media_category"===r?(n=t.data.media_cats.join(", "),e.value=n,a.setAttribute("data-taxes",n)):"media_post_tag"===r&&(n=t.data.media_tags.join(", "),e.value=n,a.setAttribute("data-tags",n)),clearTimeout(i),document.getElementById("tax-saved").classList.remove("hidden"),document.getElementById("tax-saved").setAttribute("aria-hidden","false"),i=setTimeout((function(){document.getElementById("tax-saved").classList.add("hidden"),document.getElementById("tax-saved").setAttribute("aria-hidden","true")}),3e3)):console.error(_wpMediaGridSettings.failed_update,t.data.error)}))["catch"]((function(e){console.error(_wpMediaGridSettings.error,e)}))}}(e,t)}))}))}function M(e){var t=document.querySelector(".delete-selected-button");e.className.includes("selected")?(e.classList.remove("selected"),e.setAttribute("aria-checked",!1),null==document.querySelector(".media-item.selected")&&t.setAttribute("disabled",!0)):(e.classList.add("selected"),e.setAttribute("aria-checked",!0),t.disabled&&t.removeAttribute("disabled"))}function T(e){var t=document.createElement("li"),a='<img src="'+e.url+'" alt="'+e.alt+'">';return"application"===e.type?a="vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.subtype?'<div class="icon"><div class="centered"><img src="'+_wpMediaGridSettings.includes_url+'images/media/spreadsheet.png" draggable="false" alt=""></div><div class="filename"><div>'+e.title+"</div></div></div>":"zip"===e.subtype?'<div class="icon"><div class="centered"><img src="'+_wpMediaGridSettings.includes_url+'images/media/archive.png" draggable="false" alt=""></div><div class="filename"><div>'+e.title+"</div></div></div>":'<div class="icon"><div class="centered"><img src="'+_wpMediaGridSettings.includes_url+'images/media/document.png" draggable="false" alt=""></div><div class="filename"><div>'+e.title+"</div></div></div>":"audio"===e.type?a='<div class="icon"><div class="centered"><img src="'+_wpMediaGridSettings.includes_url+'images/media/audio.png" draggable="false" alt=""></div><div class="filename"><div>'+e.title+"</div></div></div>":"video"===e.type&&(a='<div class="icon"><div class="centered"><img src="'+_wpMediaGridSettings.includes_url+'images/media/video.png" draggable="false" alt=""></div><div class="filename"><div>'+e.title+"</div></div></div>"),t.className="media-item",t.id="media-"+e.id,t.setAttribute("tabindex",0),t.setAttribute("role","checkbox"),t.setAttribute("aria-checked","false"),t.setAttribute("aria-label",e.title),t.setAttribute("data-date",e.dateFormatted),t.setAttribute("data-url",e.url),t.setAttribute("data-filename",e.filename),t.setAttribute("data-filetype",e.type),t.setAttribute("data-mime",e.mime),t.setAttribute("data-width",e.width),t.setAttribute("data-height",e.height),t.setAttribute("data-size",e.filesizeHumanReadable),t.setAttribute("data-caption",e.caption),t.setAttribute("data-description",e.description),t.setAttribute("data-link",e.link),t.setAttribute("data-orientation",e.orientation),t.setAttribute("data-menu-order",e.menuOrder),t.setAttribute("data-taxes",e.media_cats),t.setAttribute("data-tags",e.media_tags),t.setAttribute("data-update-nonce",e.nonces.update),t.setAttribute("data-delete-nonce",e.nonces["delete"]),t.setAttribute("data-edit-nonce",e.nonces.edit),t.innerHTML='<div class="select-attachment-preview type-'+e.type+" subtype-"+e.subtype+'"><div class="media-thumbnail">'+a+'</div></div><button type="button" class="check" tabindex="-1"><span class="media-modal-icon"></span><span class="screen-reader-text">'+_wpMediaGridSettings.deselect+"></span></button>",t}function N(){var e=S.value,t=q.value,a=document.querySelector(".load-more-count").textContent;const i=new URLSearchParams({action:"query-attachments","query[posts_per_page]":document.getElementById("media_grid_per_page").value,"query[monthnum]":e?parseInt(e.substr(4,2),10):0,"query[year]":e?parseInt(e.substr(0,4),10):0,"query[post_mime_type]":t||"","query[s]":A?A.value:"","query[paged]":f||"1","query[media_category_name]":E?E.value:"",_ajax_nonce:document.getElementById("media_grid_nonce").value});fetch(s,{method:"POST",body:i,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){e.success?(w.innerHTML="",0===e.data.length?(document.querySelectorAll(".pagination-links a").forEach((function(e){e.setAttribute("href",e.href.replace(e.href.split("?paged=")[1],1)),e.setAttribute("disabled",!0),e.setAttribute("inert",!0)})),document.getElementById("current-page-selector").setAttribute("value",1),document.querySelector(".total-pages").textContent=1,document.querySelector(".displaying-num").textContent=document.querySelector(".displaying-num").textContent.replace(/[0-9]+/,0),document.querySelector(".load-more-count").setAttribute("hidden",!0),document.querySelector(".no-media").removeAttribute("hidden"),n.set("paged",1),history.replaceState(null,null,"?"+n.toString())):(e.data.forEach((function(e){var t=T(e);w.appendChild(t)})),document.querySelectorAll(".pagination-links a").forEach((function(t){t.className.includes("first-page")||t.className.includes("prev-page")?"1"===f?(t.setAttribute("disabled",!0),t.setAttribute("inert",!0)):(t.removeAttribute("disabled"),t.removeAttribute("inert"),t.className.includes("prev-page")&&t.setAttribute("href",t.href.replace(t.href.split("?paged=")[1],parseInt(f)-1))):t.className.includes("next-page")?e.headers.max_pages===parseInt(f)?(t.setAttribute("href",t.href.replace(t.href.split("?paged=")[1],f)),t.setAttribute("disabled",!0),t.setAttribute("inert",!0)):(t.setAttribute("href",t.href.replace(t.href.split("?paged=")[1],parseInt(f)+1)),t.removeAttribute("disabled"),t.removeAttribute("inert")):t.className.includes("last-page")&&(t.setAttribute("href",t.href.replace(t.href.split("?paged=")[1],e.headers.max_pages)),e.headers.max_pages===parseInt(f)?(t.setAttribute("disabled",!0),t.setAttribute("inert",!0)):(t.removeAttribute("disabled"),t.removeAttribute("inert"))),document.getElementById("current-page-selector").setAttribute("value",f||1),document.getElementById("current-page-selector").value=f||1,document.querySelector(".total-pages").textContent=e.headers.max_pages,document.querySelector(".displaying-num").textContent=document.querySelector(".displaying-num").textContent.replace(/[0-9]+/,e.headers.total_posts),n.set("paged",f),history.replaceState(null,null,"?"+n.toString())})),document.querySelectorAll(".media-item").forEach((function(e){e.addEventListener("click",(function(){null==document.querySelector(".media-toolbar-mode-select")?B(e):M(e)}))})),document.querySelector(".no-media").setAttribute("hidden",!0),document.querySelector(".load-more-count").removeAttribute("hidden"),document.querySelector(".load-more-count").textContent=a.replace(/[0-9]+/g,e.headers.total_posts).replace(/[0-9]+/,e.data.length)),f="1"):console.error(_wpMediaGridSettings.failed_update,e.data.message)}))["catch"]((function(e){console.error(_wpMediaGridSettings.error,e)}))}function C(){null!=document.querySelector(".imgedit-wrap")&&(document.querySelector(".imgedit-wrap").remove(),document.querySelector(".attachment-details").removeAttribute("hidden"),document.querySelector(".attachment-details").removeAttribute("inert"))}function G(){var e=m.dataset.prev;e&&(a=e,document.getElementById(e).click(),""===v.style.display?m.focus():g.focus()),C()}function P(){var e=p.dataset.next;e&&(a=e,document.getElementById(e).click(),""===v.style.display?p.focus():h.focus()),C()}function F(e){u.open&&("ArrowLeft"===e.key?(e.preventDefault(),G()):"ArrowRight"===e.key&&(e.preventDefault(),P()))}window.addEventListener("resize",I),u.querySelector(".delete-attachment").addEventListener("click",(function(){var e=location.search.match(/\d+/g)[0];window.confirm(_wpMediaGridSettings.confirm_delete)&&(L(e),k())})),n.has("item")&&null!=(t=parseInt(n.get("item")))&&null!=document.getElementById("media-"+t)&&setTimeout((function(){document.getElementById("media-"+t).click(),n.has("mode")&&"edit"===n.get("mode")&&document.querySelector(".edit-attachment").click()})),null!=l&&(""==l.value&&(d.setAttribute("inert",!0),d.setAttribute("disabled",!0),window.addEventListener("dragover",(function(e){e.preventDefault()}),!1),window.addEventListener("drop",(function(e){e.preventDefault()}),!1)),l.addEventListener("change",(function(e){var t,a=document.querySelector(".is-dismissible"),i=new URLSearchParams({action:"media-cat-upload",option:"media_cat_upload_folder",media_cat_upload_value:e.target.value,media_cat_upload_nonce:document.getElementById("media_cat_upload_nonce").value});null!=a&&a.remove(),""==l.value?(d.setAttribute("inert",!0),d.setAttribute("disabled",!0),window.addEventListener("dragover",(function(e){e.preventDefault()}),!1),window.addEventListener("drop",(function(e){e.preventDefault()}),!1)):(d.removeAttribute("inert"),d.removeAttribute("disabled")),fetch(s,{method:"POST",body:i,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(a){a.success&&(""==a.data.value?((t=document.createElement("div")).id="message",t.className="notice notice-error is-dismissible",t.innerHTML="<p>"+a.data.message+'</p><button class="notice-dismiss" type="button"></button>',document.querySelector(".page-title-action").after(t),o.click()):((t=document.createElement("div")).id="message",t.className="updated notice notice-success is-dismissible",t.innerHTML="<p>"+a.data.message+'</p><button class="notice-dismiss" type="button"></button>',document.querySelector(".page-title-action").after(t),l.childNodes.forEach((function(t){t.value===e.target.value?t.setAttribute("selected",!0):t.removeAttribute("selected")}))))}))["catch"]((function(e){(t=document.createElement("div")).id="message",t.className="notice notice-error is-dismissible",t.innerHTML="<p>"+e+'</p><button class="notice-dismiss" type="button"></button>',document.querySelector(".page-title-action").after(t)}))})),document.addEventListener("click",(function(e){"notice-dismiss"===e.target.className&&document.querySelector(".is-dismissible").remove()}))),q&&q.addEventListener("change",N),S&&S.addEventListener("change",N),E&&E.addEventListener("change",N),A.addEventListener("input",(function(){var e;clearTimeout(e),e=setTimeout(N,200)})),document.getElementById("current-page-selector").addEventListener("change",(function(e){var t;f=e.target.value,clearTimeout(t),t=setTimeout(N,200)})),document.querySelectorAll(".pagination-links a").forEach((function(e){e.addEventListener("click",(function(t){""===q.value&&"0"===S.value&&"0"===E.value||(t.preventDefault(),f=e.href.split("?paged=")[1],N())}))})),d.addEventListener("click",(function(){r.hasAttribute("hidden")?(r.removeAttribute("inert"),r.removeAttribute("hidden"),d.setAttribute("aria-expanded",!0)):(r.setAttribute("inert",!0),r.setAttribute("hidden",!0),d.setAttribute("aria-expanded",!1))})),o.addEventListener("click",(function(){r.setAttribute("inert",!0),r.setAttribute("hidden",!0),d.setAttribute("aria-expanded",!1)})),document.addEventListener("keyup",(function(e){"Escape"===e.key?(n["delete"]("item"),n["delete"]("mode"),history.replaceState(null,null,location.href.split("?")[0]),o.click(),null!=a&&(document.getElementById(a).focus(),a=null),C()):"Enter"===e.key&&"media-item"===e.target.className&&e.target.click()})),document.querySelectorAll(".media-item").forEach((function(e){e.addEventListener("click",(function(){null==document.querySelector(".media-toolbar-mode-select")?B(e):M(e)}))})),u.querySelectorAll(".settings input, .settings textarea").forEach((function(e){e.addEventListener("blur",(function(){var t=n.get("item");document.getElementById("media-"+t).dataset.updateNonce&&function(e,t){var a=document.getElementById("media-"+t);if(a){var i,n=new FormData;n.append("action","save-attachment"),n.append("id",t),n.append("nonce",a.dataset.updateNonce),"alt"===e.parentNode.dataset.setting?n.append("changes[alt]",e.value):"title"===e.parentNode.dataset.setting?n.append("changes[title]",e.value):"caption"===e.parentNode.dataset.setting?n.append("changes[caption]",e.value):"description"===e.parentNode.dataset.setting&&n.append("changes[description]",e.value),fetch(s,{method:"POST",body:n,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(t){t.success?("alt"===e.parentNode.dataset.setting?a.querySelector("img").setAttribute("alt",e.value):"title"===e.parentNode.dataset.setting?a.setAttribute("aria-label",e.value):"caption"===e.parentNode.dataset.setting?a.setAttribute("data-caption",e.value):"description"===e.parentNode.dataset.setting&&a.setAttribute("data-description",e.value),clearTimeout(i),document.getElementById("details-saved").classList.remove("hidden"),document.getElementById("details-saved").setAttribute("aria-hidden","false"),i=setTimeout((function(){document.getElementById("details-saved").classList.add("hidden"),document.getElementById("details-saved").setAttribute("aria-hidden","true")}),3e3)):console.error(_wpMediaGridSettings.failed_update,t.data.error)}))["catch"]((function(e){console.error(_wpMediaGridSettings.error,e)}))}}(e,t)}))})),y.addEventListener("click",(function(){n["delete"]("item"),n["delete"]("mode"),history.replaceState(null,null,location.href.split("?")[0]),u.classList.remove("modal-loading"),document.body.style.overflow="",u.close(),null!=a&&(document.getElementById(a).focus(),a=null),C()})),m.addEventListener("click",G),g.addEventListener("click",G),p.addEventListener("click",P),h.addEventListener("click",P),document.querySelector(".edit-media-header").addEventListener("keydown",F),b.addEventListener("keydown",F),u.addEventListener("touchstart",(function(e){_=e.touches[0].clientX})),u.addEventListener("touchend",(function(e){(x=e.changedTouches[0].clientX)-_>50?G():_-x>50&&P()})),document.querySelector(".edit-attachment").addEventListener("click",(function(){var e=parseInt(n.get("item")),t=document.getElementById("media-"+e).dataset.editNonce,a=new FormData;a.append("action","image-editor"),a.append("_ajax_nonce",t),a.append("postid",e),a.append("do","rotate-cw"),a.append("target","full"),a.append("context","edit-attachment"),fetch(s,{method:"POST",body:a,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){if(null==u.querySelector("#edit-image-navigation")){var t=document.createElement("div");t.id="edit-image-navigation",t.className="attachment-media-view landscape",t.append(b),document.querySelector(".media-frame-content").before(t)}document.querySelector(".attachment-details").setAttribute("hidden",!0),document.querySelector(".attachment-details").setAttribute("inert",!0),document.querySelector(".media-frame-content").insertAdjacentHTML("beforeend",e.data.html),n.set("mode","edit"),history.replaceState(null,null,"?"+n.toString())}))["catch"]((function(e){console.error("Error:",e)}))})),document.querySelector(".select-mode-toggle-button").addEventListener("click",(function(e){var t=document.querySelector(".cp-media-toolbar"),a=document.querySelector(".delete-selected-button");t.className.includes("media-toolbar-mode-select")?(document.querySelectorAll(".media-item").forEach((function(e){e.className.includes("selected")&&(e.classList.remove("selected"),e.setAttribute("aria-checked",!1))})),e.target.textContent="Bulk select",S.style.display="",q.style.display="",E.style.display="",a.classList.add("hidden"),t.classList.remove("media-toolbar-mode-select")):(e.target.textContent="Cancel",S.style.display="none",q.style.display="none",E.style.display="none",a.classList.remove("hidden"),t.classList.add("media-toolbar-mode-select"),a.addEventListener("click",(function(){var e=document.querySelectorAll(".media-item.selected");0!==e.length&&(window.confirm(_wpMediaGridSettings.confirm_multiple)&&e.forEach((function(e){L(e.id.replace("media-",""))})),document.querySelector(".select-mode-toggle-button").click())})))})),document.querySelector(".copy-attachment-url").addEventListener("click",(function(e){var t,a=e.target.parentNode.previousElementSibling.value,i=document.createElement("input");navigator.clipboard?navigator.clipboard.writeText(a):(document.body.append(i),i.value=a,i.select(),document.execCommand("copy")),clearTimeout(t),e.target.nextElementSibling.classList.remove("hidden"),e.target.nextElementSibling.setAttribute("aria-hidden","false"),i.remove(),t=setTimeout((function(){e.target.nextElementSibling.classList.add("hidden"),e.target.nextElementSibling.setAttribute("aria-hidden","true")}),3e3)})),i.registerPlugin(FilePondPluginFileValidateSize,FilePondPluginFileValidateType,FilePondPluginFileRename,FilePondPluginImagePreview),e=i.create(c,{allowMultiple:!0,server:{process:function(e,t,a,i,n,d,r){var o=new FormData;return o.append("async-upload",t,t.name),o.append("action","upload-attachment"),o.append("_wpnonce",document.getElementById("_wpnonce").value),fetch(s,{method:"POST",body:o,credentials:"same-origin"}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){var t;e.success?(i(e.data),t=T(e.data),w.prepend(t),t.addEventListener("click",(function(){null==document.querySelector(".media-toolbar-mode-select")?B(t):M(t)}))):n(_wpMediaGridSettings.upload_failed)}))["catch"]((function(e){n(_wpMediaGridSettings.upload_failed),console.error(_wpMediaGridSettings.error,e)})),{abort:function(){r()}}},maxFileSize:document.getElementById("ajax-url").dataset.maxFileSize},onprocessfile:(t,a)=>{t||(setTimeout((function(){e.removeFile(a.id)}),100),k())},labelTapToUndo:_wpMediaGridSettings.tap_close,fileRenameFunction:e=>new Promise((function(t){t(window.prompt(_wpMediaGridSettings.new_filename,e.name))})),acceptedFileTypes:document.querySelector(".uploader-inline").dataset.allowedMimes.split(","),labelFileTypeNotAllowed:_wpMediaGridSettings.invalid_type,fileValidateTypeLabelExpectedTypes:_wpMediaGridSettings.check_types})}));